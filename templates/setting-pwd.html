<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../static/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="../static/css/bootstrap-theme.min.css" type="text/css">
    <link rel="stylesheet" href="https://apps.bdimg.com/libs/bootstrap/3.2.0/css/bootstrap.min.css">
    <script language="JavaScript" src="../static/js/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios@0.12.0/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.13.1/lodash.min.js"></script>
    <script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="../static/css/setting-pwd.css" type="text/css">
    <title>设置|Online Learning</title>
</head>
<body>
<nav class="navbar nav_bar">
    <div class="container-fluid">
        <div class="navbar-header">
            <span class="navbar-brand index_title">Online Learning | 在线学习</span>
        </div>
        <div class="nav navbar-left back-index">
            <a href="{{ url_for('index') }}">首页</a>
            <span style="margin-left: 1em;margin-right: 1em"></span>
            <a href="{{ url_for('course') }}">课程</a>
        </div>
        <form class="navbar-form navbar-left">
            <form class="navbar-form navbar-left" action="{{ url_for('searchCourse') }}">
                <div class="form-group search">
                    <input type="text" class="form-control" placeholder="搜索感兴趣的课程" name="course" style="width: 300px">
                    <button type="submit" class="btn search_btn" value="">
                    <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                    </button>
                </div>
            </form>
        </form>
        <div>
            <ul class="nav navbar-nav navbar-right">
                <li class="drop_down" style="padding-right: 1em">
                    <a href="{{ url_for('personalCenter') }}" >个人中心</a>
                </li>
                <li class="dropdown drop_down">
                    <a href="#" class="dropdown-toggle" role="button"
                       data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <li ><a href="{{ url_for('setting') }}">设置</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="{{ url_for('logout') }}">退出</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="{{ url_for('help') }}">帮助</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>
<div class="container-fluid">
    <div class="row">
        <div class="col-md-8 col-md-offset-2">
            <div class="change-panel">
                <div class="setting-tab" align="center">
                    <ul>
                        <li>
                            <a href="{{ url_for('setting') }}" id="setting-id">账号设置</a>
                        </li>
                        <li class="current">
                            <a id="setting-pwd">密码设置</a>
                        </li>
                    </ul>
                </div>
                <form id="setting-pwd-form" method="post">
                    <div class="form-group userInfo" id="userInfo">
                        <div>
                        <span style="margin-top: 4em;font-size: 1.2em">
                                <label for="old-pwd" class="setting-label">原 密 码</label>
                        </span>
                            <input type="password" class="input-box" id="old-pwd" name="password1"
                                   placeholder="请输入你当前的密码" title="当前密码">
                            <span id="old-pwd-tip" class="tip"></span>
                        </div>
                        <div>
                        <span style="margin-top: 4em;font-size: 1.2em">
                             <label for="new-pwd" class="setting-label">新 密 码</label>
                        </span>
                            <input type="password" class="input-box" id="new-pwd" name="password2"
                                   placeholder="7-30个字符，不包含-和_以外的特殊字符和空格" >
                            <span id="new-pwd-tip" class="tip"></span>
                        </div>
                        <div style="margin-bottom: 1.3em">
                            <span style="margin-top: 4em;font-size: 1.2em">
                                <label for="new-pwd2" class="setting-label">确认密码</label>
                            </span>
                            <input type="password" class="input-box2" id="new-pwd2" name="password3"
                                   placeholder="请再次输入密码" onchange="resure_password()">
                            <span id="new-pwd2-tip" class="tip"></span>
                        </div>
                        <div class="content-spin"></div>
                        <div class="change-spin" align="center">
                            <input type="submit" class="btn btn-success btn-change" value="修&nbsp;&nbsp;改" id="submit">
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
</body>
{#<script language="JavaScript">#}
{#    var pwd_patten = new RegExp(/^[_\w-]{6,29}$/);#}
{#    var old_pwd_ok = true;#}
{#    var new_pwd_ok = false;#}
{#    var new_pwd2_ok = false;#}
{#    var new_pwd_null = true;#}
{#    var old_pwd_null = true;#}
{#    var new_pwd2_null = true;#}
{#    $(function(){#}
{#        $("#old-pwd").blur('input',function(e){#}
{#            var old_pwd = $("input[id='old-pwd']").val();#}
{#            var patten=true;#}
{#            var num=true;#}
{#            if(!pwd_patten.test(old_pwd)){#}
{#                patten=false;#}
{#            }#}
{#            if(old_pwd.length<1){#}
{#                $("#old-pwd").css("border-color","red");#}
{#                $("#old-pwd-tip").css({"color":"red"}).text("请输入原密码");#}
{#                num=false;#}
{#                old_pwd_null=true;#}
{#            }#}
{#            if(old_pwd.length>0){#}
{#                old_pwd_null=false;#}
{#            }#}
{#        });#}
{#    });#}
{##}
{#    $(function () {#}
{#        $("#new-pwd").on('input',function(e){#}
{#            var password = $("input[id='new-pwd']").val();#}
{#            var num=true;#}
{#            var patten=true;#}
{#            if(!pwd_patten.test(password)){#}
{#                patten=false;#}
{#            }#}
{#            if(password.length<1||password.length>30||password.length<7){#}
{#                num=false;#}
{#            }#}
{#            if(password.length<1){#}
{#                new_pwd_null=true;#}
{#            }#}
{#            if(patten&&num){#}
{#                $("#new-pwd").css("border-color","green");#}
{#                $("#new-pwd-tip").css({"color":"green"}).text("");#}
{#                new_pwd_ok=true;#}
{#                new_pwd_null=false;#}
{#            }#}
{#            else{#}
{#                $("#new-pwd").css("border-color","red");#}
{#                $("#new-pwd-tip").css({"color":"red"}).text("7-30个字符，不包含-和_以外的特殊字符和空格");#}
{#                new_pwd_ok=false;#}
{#            }#}
{#        });#}
{##}
{#        $("#new-pwd2").blur('input',function (e) {#}
{#            var password2 = $("input[id='new-pwd2']").val();#}
{#            var password1 = $("input[id='new-pwd']").val();#}
{#            if(password2.length<1){#}
{#                new_pwd2_null=true;#}
{#                $("#new-pwd2").css("border-color","red").text("请再次输入密码！");#}
{#            }#}
{#            if(!(password1===""||password1===null)&&password1===password2&&new_pwd_ok){#}
{#                $("#new-pwd2").css("border-color","green");#}
{#                $("#new-pwd2-tip").css({"color":"green"}).text("");#}
{#                new_pwd2_ok=true;#}
{#                new_pwd2_null=false;#}
{#            }#}
{#            if(!(password1===""||password1===null)&&!(password1===password2)&&new_pwd_ok){#}
{#                new_pwd2_ok=false;#}
{#                $("#new-pwd2").css("border-color","red");#}
{#                $("#new-pwd2-tip").css({"color":"red"}).text("密码不一致！");#}
{#            }#}
{#            if(password1===""||password1===null){#}
{#                $("#new-pwd").css("border-color","red");#}
{#                $("#new-pwd2-tip").css("border-color","red").text("请先确保上一栏的密码格式正确！");#}
{#                new_pwd2_ok=false;#}
{#            }#}
{#        });#}
{#    });#}
{##}
{#    var changeForm = document.getElementById('setting-pwd-form');#}
{#    var submit = document.getElementById('submit');#}
{#    submit.onclick=function () {#}
{#        if(old_pwd_ok&&new_pwd_ok&&new_pwd2_ok){#}
{#            changeForm.submit();#}
{#        }#}
{#        else{#}
{#            if(old_pwd_null){#}
{#                $("#old-pwd-tip").css("color","red").text("请输入原密码");#}
{#            }#}
{#            if(!(old_pwd_ok||old_pwd_null)){#}
{#                $("#old-pwd").css("border-color","red");#}
{#            }#}
{#            if(new_pwd_null){#}
{#                $("#new-pwd-tip").css("color","red").text("7-30个字符，不包含-和_以外的特殊字符");#}
{#            }#}
{#            if(!(new_pwd_ok||new_pwd_null)){#}
{#                $("#new-pwd").css("border-color","red");#}
{#            }#}
{#            if(new_pwd2_null){#}
{#                $("#new-pwd2-tip").css("color","red").text("请输入确认密码！");#}
{#            }#}
{#            if(!(new_pwd2_ok||new_pwd2_null)){#}
{#                $("#new-pwd2").css("border-color","red");#}
{#            }#}
{#            $("#submitTip").css({"color":"red","padding-left":"4.8em"}).text("新密码设置失败！");#}
{#            return false;#}
{#        }#}
{#    };#}
{##}
{#</script>#}
</html>